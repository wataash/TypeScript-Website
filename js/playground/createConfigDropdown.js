define(["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.setupJSONToggleForConfig = exports.updateConfigDropdownForCompilerOptions = exports.createConfigDropdown = void 0;
    const createConfigDropdown = (sandbox, monaco) => {
        const configContainer = document.getElementById("config-container");
        const container = document.createElement("div");
        container.id = "boolean-options-container";
        configContainer.appendChild(container);
        const compilerOpts = sandbox.getCompilerOptions();
        const boolOptions = Object.keys(compilerOpts).filter(k => typeof compilerOpts[k] === "boolean");
        // we want to make sections of categories
        const categoryMap = {};
        boolOptions.forEach(optID => {
            const summary = optionsSummary.find(sum => optID === sum.id);
            const existingCategory = categoryMap[summary.categoryID];
            if (!existingCategory)
                categoryMap[summary.categoryID] = {};
            categoryMap[summary.categoryID][optID] = summary;
        });
        Object.keys(categoryMap).forEach(categoryID => {
            const categoryDiv = document.createElement("div");
            const header = document.createElement("h4");
            const ol = document.createElement("ol");
            Object.keys(categoryMap[categoryID]).forEach(optID => {
                const optSummary = categoryMap[categoryID][optID];
                header.textContent = optSummary.categoryDisplay;
                const li = document.createElement("li");
                const label = document.createElement("label");
                label.style.position = "relative";
                label.style.width = "100%";
                const svg = `<?xml version="1.0" encoding="UTF-8"?><svg width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
          <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
            <circle stroke="#0B6F57" cx="10" cy="10" r="9"></circle>
            <path d="M9.99598394,6 C10.2048193,6 10.4243641,5.91700134 10.6546185,5.75100402 C10.8848728,5.58500669 11,5.33601071 11,5.00401606 C11,4.66666667 10.8848728,4.41499331 10.6546185,4.24899598 C10.4243641,4.08299866 10.2048193,4 9.99598394,4 C9.79250335,4 9.57563588,4.08299866 9.34538153,4.24899598 C9.11512718,4.41499331 9,4.66666667 9,5.00401606 C9,5.33601071 9.11512718,5.58500669 9.34538153,5.75100402 C9.57563588,5.91700134 9.79250335,6 9.99598394,6 Z M10.6877323,16 L10.6877323,14.8898836 L10.6877323,8 L9.30483271,8 L9.30483271,9.11011638 L9.30483271,16 L10.6877323,16 Z" fill="#0B6F57" fill-rule="nonzero"></path>
          </g>
      </svg>`;
                label.innerHTML = `<span>${optSummary.id}</span><a href='../tsconfig#${optSummary.id}' class='compiler_info_link' alt='Look up ${optSummary.id} in the TSConfig Reference'>${svg}</a><br/>${optSummary.oneliner}`;
                const input = document.createElement("input");
                input.value = optSummary.id;
                input.type = "checkbox";
                input.name = optSummary.id;
                input.id = "option-" + optSummary.id;
                input.onchange = () => {
                    sandbox.updateCompilerSetting(optSummary.id, input.checked);
                };
                label.htmlFor = input.id;
                li.appendChild(input);
                li.appendChild(label);
                ol.appendChild(li);
            });
            categoryDiv.appendChild(header);
            categoryDiv.appendChild(ol);
            container.appendChild(categoryDiv);
        });
        const dropdownContainer = document.getElementById("compiler-dropdowns");
        const target = optionsSummary.find(sum => sum.id === "target");
        const targetSwitch = createSelect(target.display, "target", target.oneliner, sandbox, monaco.languages.typescript.ScriptTarget);
        dropdownContainer.appendChild(targetSwitch);
        const jsx = optionsSummary.find(sum => sum.id === "jsx");
        const jsxSwitch = createSelect(jsx.display, "jsx", jsx.oneliner, sandbox, monaco.languages.typescript.JsxEmit);
        dropdownContainer.appendChild(jsxSwitch);
        // When switching between a .ts and a .tsx file - refresh the playground
        const internalSwitch = jsxSwitch.getElementsByTagName("select")[0];
        internalSwitch.addEventListener("change", () => {
            const isNowJSX = internalSwitch.selectedIndex !== 0;
            const isJSX = sandbox.filepath.endsWith("x");
            if (isNowJSX !== isJSX) {
                const newURL = sandbox.createURLQueryWithCompilerOptions(sandbox);
                window.history.replaceState({}, "", newURL);
                setTimeout(() => document.location.reload(), 300);
            }
        });
        const modSum = optionsSummary.find(sum => sum.id === "module");
        const moduleSwitch = createSelect(modSum.display, "module", modSum.oneliner, sandbox, monaco.languages.typescript.ModuleKind);
        dropdownContainer.appendChild(moduleSwitch);
    };
    exports.createConfigDropdown = createConfigDropdown;
    const updateConfigDropdownForCompilerOptions = (sandbox, monaco) => {
        const compilerOpts = sandbox.getCompilerOptions();
        const boolOptions = Object.keys(compilerOpts).filter(k => typeof compilerOpts[k] === "boolean");
        boolOptions.forEach(opt => {
            const inputID = "option-" + opt;
            const input = document.getElementById(inputID);
            input.checked = !!compilerOpts[opt];
        });
        const compilerIDToMaps = {
            module: monaco.languages.typescript.ModuleKind,
            jsx: monaco.languages.typescript.JsxEmit,
            target: monaco.languages.typescript.ScriptTarget,
        };
        Object.keys(compilerIDToMaps).forEach(flagID => {
            const input = document.getElementById("compiler-select-" + flagID);
            const currentValue = compilerOpts[flagID];
            const map = compilerIDToMaps[flagID];
            // @ts-ignore
            const realValue = map[currentValue];
            if (!realValue)
                return;
            // @ts-ignore
            for (const option of input.children) {
                option.selected = option.value.toLowerCase() === realValue.toLowerCase();
            }
        });
    };
    exports.updateConfigDropdownForCompilerOptions = updateConfigDropdownForCompilerOptions;
    const createSelect = (title, id, blurb, sandbox, option) => {
        const label = document.createElement("label");
        const textToDescribe = document.createElement("span");
        textToDescribe.textContent = title + ":";
        label.appendChild(textToDescribe);
        const select = document.createElement("select");
        select.id = "compiler-select-" + id;
        label.appendChild(select);
        select.onchange = () => {
            const value = select.value; // the human string
            const compilerIndex = option[value];
            sandbox.updateCompilerSetting(id, compilerIndex);
        };
        Object.keys(option)
            .filter(key => isNaN(Number(key)))
            .forEach(key => {
            // hide Latest
            if (key === "Latest")
                return;
            const option = document.createElement("option");
            option.value = key;
            option.text = key;
            select.appendChild(option);
        });
        const span = document.createElement("span");
        span.textContent = blurb;
        span.classList.add("compiler-flag-blurb");
        label.appendChild(span);
        return label;
    };
    const setupJSONToggleForConfig = (sandbox) => { };
    exports.setupJSONToggleForConfig = setupJSONToggleForConfig;
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3JlYXRlQ29uZmlnRHJvcGRvd24uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wbGF5Z3JvdW5kL3NyYy9jcmVhdGVDb25maWdEcm9wZG93bi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0lBY08sTUFBTSxvQkFBb0IsR0FBRyxDQUFDLE9BQWdCLEVBQUUsTUFBYyxFQUFFLEVBQUU7UUFDdkUsTUFBTSxlQUFlLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxrQkFBa0IsQ0FBRSxDQUFBO1FBQ3BFLE1BQU0sU0FBUyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUE7UUFDL0MsU0FBUyxDQUFDLEVBQUUsR0FBRywyQkFBMkIsQ0FBQTtRQUMxQyxlQUFlLENBQUMsV0FBVyxDQUFDLFNBQVMsQ0FBQyxDQUFBO1FBRXRDLE1BQU0sWUFBWSxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsRUFBRSxDQUFBO1FBQ2pELE1BQU0sV0FBVyxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsT0FBTyxZQUFZLENBQUMsQ0FBQyxDQUFDLEtBQUssU0FBUyxDQUFDLENBQUE7UUFFL0YseUNBQXlDO1FBQ3pDLE1BQU0sV0FBVyxHQUFHLEVBQWlFLENBQUE7UUFDckYsV0FBVyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFBRTtZQUMxQixNQUFNLE9BQU8sR0FBRyxjQUFjLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsS0FBSyxLQUFLLEdBQUcsQ0FBQyxFQUFFLENBQUUsQ0FBQTtZQUU3RCxNQUFNLGdCQUFnQixHQUFHLFdBQVcsQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUE7WUFDeEQsSUFBSSxDQUFDLGdCQUFnQjtnQkFBRSxXQUFXLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxHQUFHLEVBQUUsQ0FBQTtZQUUzRCxX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LE9BQU8sS0FBSyxDQUFBO0lBQ2QsQ0FBQyxDQUFBO0lBRU0sTUFBTSx3QkFBd0IsR0FBRyxDQUFDLE9BQWdCLEVBQUUsRUFBRSxHQUFFLENBQUMsQ0FBQTtJQUFuRCxRQUFBLHdCQUF3Qiw0QkFBMkIiLCJzb3VyY2VzQ29udGVudCI6WyJ0eXBlIFNhbmRib3ggPSBpbXBvcnQoXCJ0eXBlc2NyaXB0LXNhbmRib3hcIikuU2FuZGJveFxudHlwZSBNb25hY28gPSB0eXBlb2YgaW1wb3J0KFwibW9uYWNvLWVkaXRvclwiKVxuXG50eXBlIE9wdGlvbnNTdW1tYXJ5ID0ge1xuICBkaXNwbGF5OiBzdHJpbmdcbiAgb25lbGluZXI6IHN0cmluZ1xuICBpZDogc3RyaW5nXG4gIGNhdGVnb3J5SUQ6IHN0cmluZ1xuICBjYXRlZ29yeURpc3BsYXk6IHN0cmluZ1xufVxuXG4vLyBUaGlzIGlzIHdoZXJlIGFsbCB0aGUgbG9jYWxpemVkIGRlc2NyaXB0aW9ucyBjb21lIGZyb21cbmRlY2xhcmUgY29uc3Qgb3B0aW9uc1N1bW1hcnk6IE9wdGlvbnNTdW1tYXJ5W11cblxuZXhwb3J0IGNvbnN0IGNyZWF0ZUNvbmZpZ0Ryb3Bkb3duID0gKHNhbmRib3g6IFNhbmRib3gsIG1vbmFjbzogTW9uYWNvKSA9PiB7XG4gIGNvbnN0IGNvbmZpZ0NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29uZmlnLWNvbnRhaW5lclwiKSFcbiAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKVxuICBjb250YWluZXIuaWQgPSBcImJvb2xlYW4tb3B0aW9ucy1jb250YWluZXJcIlxuICBjb25maWdDb250YWluZXIuYXBwZW5kQ2hpbGQoY29udGFpbmVyKVxuXG4gIGNvbnN0IGNvbXBpbGVyT3B0cyA9IHNhbmRib3guZ2V0Q29tcGlsZXJPcHRpb25zKClcbiAgY29uc3QgYm9vbE9wdGlvbnMgPSBPYmplY3Qua2V5cyhjb21waWxlck9wdHMpLmZpbHRlcihrID0+IHR5cGVvZiBjb21waWxlck9wdHNba10gPT09IFwiYm9vbGVhblwiKVxuXG4gIC8vIHdlIHdhbnQgdG8gbWFrZSBzZWN0aW9ucyBvZiBjYXRlZ29yaWVzXG4gIGNvbnN0IGNhdGVnb3J5TWFwID0ge30gYXMgeyBbY2F0ZWdvcnk6IHN0cmluZ106IHsgW29wdElEOiBzdHJpbmddOiBPcHRpb25zU3VtbWFyeSB9IH1cbiAgYm9vbE9wdGlvbnMuZm9yRWFjaChvcHRJRCA9PiB7XG4gICAgY29uc3Qgc3VtbWFyeSA9IG9wdGlvbnNTdW1tYXJ5LmZpbmQoc3VtID0+IG9wdElEID09PSBzdW0uaWQpIVxuXG4gICAgY29uc3QgZXhpc3RpbmdDYXRlZ29yeSA9IGNhdGVnb3J5TWFwW3N1bW1hcnkuY2F0ZWdvcnlJRF1cbiAgICBpZiAoIWV4aXN0aW5nQ2F0ZWdvcnkpIGNhdGVnb3J5TWFwW3N1bW1hcnkuY2F0ZWdvcnlJRF0gPSB7fVxuXG4gICAgY2F0ZWdvcnlNYXBbc3VtbWFyeS5jYXRlZ29yeUlEXVtvcHRJRF0gPSBzdW1tYXJ5XG4gIH0pXG5cbiAgT2JqZWN0LmtleXMoY2F0ZWdvcnlNYXApLmZvckVhY2goY2F0ZWdvcnlJRCA9PiB7XG4gICAgY29uc3QgY2F0ZWdvcnlEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpXG4gICAgY29uc3QgaGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImg0XCIpXG4gICAgY29uc3Qgb2wgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib2xcIilcblxuICAgIE9iamVjdC5rZXlzKGNhdGVnb3J5TWFwW2NhdGVnb3J5SURdKS5mb3JFYWNoKG9wdElEID0+IHtcbiAgICAgIGNvbnN0IG9wdFN1bW1hcnkgPSBjYXRlZ29yeU1hcFtjYXRlZ29yeUlEXVtvcHRJRF1cbiAgICAgIGhlYWRlci50ZXh0Q29udGVudCA9IG9wdFN1bW1hcnkuY2F0ZWdvcnlEaXNwbGF5XG5cbiAgICAgIGNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpXG4gICAgICBjb25zdCBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKVxuICAgICAgbGFiZWwuc3R5bGUucG9zaXRpb24gPSBcInJlbGF0aXZlXCJcbiAgICAgIGxhYmVsLnN0eWxlLndpZHRoID0gXCIxMDAlXCJcblxuICAgICAgY29uc3Qgc3ZnID0gYDw/eG1sIHZlcnNpb249XCIxLjBcIiBlbmNvZGluZz1cIlVURi04XCI/Pjxzdmcgd2lkdGg9XCIyMHB4XCIgaGVpZ2h0PVwiMjBweFwiIHZpZXdCb3g9XCIwIDAgMjAgMjBcIiB2ZXJzaW9uPVwiMS4xXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHhtbG5zOnhsaW5rPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiPlxuICAgICAgICAgIDxnIHN0cm9rZT1cIm5vbmVcIiBzdHJva2Utd2lkdGg9XCIxXCIgZmlsbD1cIm5vbmVcIiBmaWxsLXJ1bGU9XCJldmVub2RkXCI+XG4gICAgICAgICAgICA8Y2lyY2xlIHN0cm9rZT1cIiMwQjZGNTdcIiBjeD1cIjEwXCIgY3k9XCIxMFwiIHI9XCI5XCI+PC9jaXJjbGU+XG4gICAgICAgICAgICA8cGF0aCBkPVwiTTkuOTk1OTgzOTQsNiBDMTAuMjA0ODE5Myw2IDEwLjQyNDM2NDEsNS45MTcwMDEzNCAxMC42NTQ2MTg1LDUuNzUxMDA0MDIgQzEwLjg4NDg3MjgsNS41ODUwMDY2OSAxMSw1LjMzNjAxMDcxIDExLDUuMDA0MDE2MDYgQzExLDQuNjY2NjY2NjcgMTAuODg0ODcyOCw0LjQxNDk5MzMxIDEwLjY1NDYxODUsNC4yNDg5OTU5OCBDMTAuNDI0MzY0MSw0LjA4Mjk5ODY2IDEwLjIwNDgxOTMsNCA5Ljk5NTk4Mzk0LDQgQzkuNzkyNTAzMzUsNCA5LjU3NTYzNTg4LDQuMDgyOTk4NjYgOS4zNDUzODE1Myw0LjI0ODk5NTk4IEM5LjExNTEyNzE4LDQuNDE0OTkzMzEgOSw0LjY2NjY2NjY3IDksNS4wMDQwMTYwNiBDOSw1LjMzNjAxMDcxIDkuMTE1MTI3MTgsNS41ODUwMDY2OSA5LjM0NTM4MTUzLDUuNzUxMDA0MDIgQzkuNTc1NjM1ODgsNS45MTcwMDEzNCA5Ljc5MjUwMzM1LDYgOS45OTU5ODM5NCw2IFogTTEwLjY4NzczMjMsMTYgTDEwLjY4NzczMjMsMTQuODg5ODgzNiBMMTAuNjg3NzMyMyw4IEw5LjMwNDgzMjcxLDggTDkuMzA0ODMyNzEsOS4xMTAxMTYzOCBMOS4zMDQ4MzI3MSwxNiBMMTAuNjg3NzMyMywxNiBaXCIgZmlsbD1cIiMwQjZGNTdcIiBmaWxsLXJ1bGU9XCJub256ZXJvXCI+PC9wYXRoPlxuICAgICAgICAgIDwvZz5cbiAgICAgIDwvc3ZnPmBcbiAgICAgIGxhYmVsLmlubmVySFRNTCA9IGA8c3Bhbj4ke29wdFN1bW1hcnkuaWR9PC9zcGFuPjxhIGhyZWY9Jy4uL3RzY29uZmlnIyR7b3B0U3VtbWFyeS5pZH0nIGNsYXNzPSdjb21waWxlcl9pbmZvX2xpbmsnIGFsdD0nTG9vayB1cCAke29wdFN1bW1hcnkuaWR9IGluIHRoZSBUU0NvbmZpZyBSZWZlcmVuY2UnPiR7c3ZnfTwvYT48YnIvPiR7b3B0U3VtbWFyeS5vbmVsaW5lcn1gXG5cbiAgICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpXG4gICAgICBpbnB1dC52YWx1ZSA9IG9wdFN1bW1hcnkuaWRcbiAgICAgIGlucHV0LnR5cGUgPSBcImNoZWNrYm94XCJcbiAgICAgIGlucHV0Lm5hbWUgPSBvcHRTdW1tYXJ5LmlkXG4gICAgICBpbnB1dC5pZCA9IFwib3B0aW9uLVwiICsgb3B0U3VtbWFyeS5pZFxuXG4gICAgICBpbnB1dC5vbmNoYW5nZSA9ICgpID0+IHtcbiAgICAgICAgc2FuZGJveC51cGRhdGVDb21waWxlclNldHRpbmcob3B0U3VtbWFyeS5pZCwgaW5wdXQuY2hlY2tlZClcbiAgICAgIH1cblxuICAgICAgbGFiZWwuaHRtbEZvciA9IGlucHV0LmlkXG5cbiAgICAgIGxpLmFwcGVuZENoaWxkKGlucHV0KVxuICAgICAgbGkuYXBwZW5kQ2hpbGQobGFiZWwpXG4gICAgICBvbC5hcHBlbmRDaGlsZChsaSlcbiAgICB9KVxuXG4gICAgY2F0ZWdvcnlEaXYuYXBwZW5kQ2hpbGQoaGVhZGVyKVxuICAgIGNhdGVnb3J5RGl2LmFwcGVuZENoaWxkKG9sKVxuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjYXRlZ29yeURpdilcbiAgfSlcblxuICBjb25zdCBkcm9wZG93bkNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29tcGlsZXItZHJvcGRvd25zXCIpIVxuXG4gIGNvbnN0IHRhcmdldCA9IG9wdGlvbnNTdW1tYXJ5LmZpbmQoc3VtID0+IHN1bS5pZCA9PT0gXCJ0YXJnZXRcIikhXG4gIGNvbnN0IHRhcmdldFN3aXRjaCA9IGNyZWF0ZVNlbGVjdChcbiAgICB0YXJnZXQuZGlzcGxheSxcbiAgICBcInRhcmdldFwiLFxuICAgIHRhcmdldC5vbmVsaW5lcixcbiAgICBzYW5kYm94LFxuICAgIG1vbmFjby5sYW5ndWFnZXMudHlwZXNjcmlwdC5TY3JpcHRUYXJnZXRcbiAgKVxuICBkcm9wZG93bkNvbnRhaW5lci5hcHBlbmRDaGlsZCh0YXJnZXRTd2l0Y2gpXG5cbiAgY29uc3QganN4ID0gb3B0aW9uc1N1bW1hcnkuZmluZChzdW0gPT4gc3VtLmlkID09PSBcImpzeFwiKSFcbiAgY29uc3QganN4U3dpdGNoID0gY3JlYXRlU2VsZWN0KGpzeC5kaXNwbGF5LCBcImpzeFwiLCBqc3gub25lbGluZXIsIHNhbmRib3gsIG1vbmFjby5sYW5ndWFnZXMudHlwZXNjcmlwdC5Kc3hFbWl0KVxuICBkcm9wZG93bkNvbnRhaW5lci5hcHBlbmRDaGlsZChqc3hTd2l0Y2gpXG5cbiAgLy8gV2hlbiBzd2l0Y2hpbmcgYmV0d2VlbiBhIC50cyBhbmQgYSAudHN4IGZpbGUgLSByZWZyZXNoIHRoZSBwbGF5Z3JvdW5kXG4gIGNvbnN0IGludGVybmFsU3dpdGNoID0ganN4U3dpdGNoLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2VsZWN0XCIpWzBdXG4gIGludGVybmFsU3dpdGNoLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgKCkgPT4ge1xuICAgIGNvbnN0IGlzTm93SlNYID0gaW50ZXJuYWxTd2l0Y2guc2VsZWN0ZWRJbmRleCAhPT0gMFxuICAgIGNvbnN0IGlzSlNYID0gc2FuZGJveC5maWxlcGF0aC5lbmRzV2l0aChcInhcIilcbiAgICBpZiAoaXNOb3dKU1ggIT09IGlzSlNYKSB7XG4gICAgICBjb25zdCBuZXdVUkwgPSBzYW5kYm94LmNyZWF0ZVVSTFF1ZXJ5V2l0aENvbXBpbGVyT3B0aW9ucyhzYW5kYm94KVxuICAgICAgd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKHt9LCBcIlwiLCBuZXdVUkwpXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IGRvY3VtZW50LmxvY2F0aW9uLnJlbG9hZCgpLCAzMDApXG4gICAgfVxuICB9KVxuXG4gIGNvbnN0IG1vZFN1bSA9IG9wdGlvbnNTdW1tYXJ5LmZpbmQoc3VtID0+IHN1bS5pZCA9PT0gXCJtb2R1bGVcIikhXG4gIGNvbnN0IG1vZHVsZVN3aXRjaCA9IGNyZWF0ZVNlbGVjdChcbiAgICBtb2RTdW0uZGlzcGxheSxcbiAgICBcIm1vZHVsZVwiLFxuICAgIG1vZFN1bS5vbmVsaW5lcixcbiAgICBzYW5kYm94LFxuICAgIG1vbmFjby5sYW5ndWFnZXMudHlwZXNjcmlwdC5Nb2R1bGVLaW5kXG4gIClcbiAgZHJvcGRvd25Db250YWluZXIuYXBwZW5kQ2hpbGQobW9kdWxlU3dpdGNoKVxufVxuXG5leHBvcnQgY29uc3QgdXBkYXRlQ29uZmlnRHJvcGRvd25Gb3JDb21waWxlck9wdGlvbnMgPSAoc2FuZGJveDogU2FuZGJveCwgbW9uYWNvOiBNb25hY28pID0+IHtcbiAgY29uc3QgY29tcGlsZXJPcHRzID0gc2FuZGJveC5nZXRDb21waWxlck9wdGlvbnMoKVxuICBjb25zdCBib29sT3B0aW9ucyA9IE9iamVjdC5rZXlzKGNvbXBpbGVyT3B0cykuZmlsdGVyKGsgPT4gdHlwZW9mIGNvbXBpbGVyT3B0c1trXSA9PT0gXCJib29sZWFuXCIpXG5cbiAgYm9vbE9wdGlvbnMuZm9yRWFjaChvcHQgPT4ge1xuICAgIGNvbnN0IGlucHV0SUQgPSBcIm9wdGlvbi1cIiArIG9wdFxuICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaW5wdXRJRCkgYXMgSFRNTElucHV0RWxlbWVudFxuICAgIGlucHV0LmNoZWNrZWQgPSAhIWNvbXBpbGVyT3B0c1tvcHRdXG4gIH0pXG5cbiAgY29uc3QgY29tcGlsZXJJRFRvTWFwczogYW55ID0ge1xuICAgIG1vZHVsZTogbW9uYWNvLmxhbmd1YWdlcy50eXBlc2NyaXB0Lk1vZHVsZUtpbmQsXG4gICAganN4OiBtb25hY28ubGFuZ3VhZ2VzLnR5cGVzY3JpcHQuSnN4RW1pdCxcbiAgICB0YXJnZXQ6IG1vbmFjby5sYW5ndWFnZXMudHlwZXNjcmlwdC5TY3JpcHRUYXJnZXQsXG4gIH1cblxuICBPYmplY3Qua2V5cyhjb21waWxlcklEVG9NYXBzKS5mb3JFYWNoKGZsYWdJRCA9PiB7XG4gICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbXBpbGVyLXNlbGVjdC1cIiArIGZsYWdJRCkgYXMgSFRNTElucHV0RWxlbWVudFxuICAgIGNvbnN0IGN1cnJlbnRWYWx1ZSA9IGNvbXBpbGVyT3B0c1tmbGFnSURdXG4gICAgY29uc3QgbWFwID0gY29tcGlsZXJJRFRvTWFwc1tmbGFnSURdXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGNvbnN0IHJlYWxWYWx1ZSA9IG1hcFtjdXJyZW50VmFsdWVdXG4gICAgaWYgKCFyZWFsVmFsdWUpIHJldHVyblxuXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGZvciAoY29uc3Qgb3B0aW9uIG9mIGlucHV0LmNoaWxkcmVuKSB7XG4gICAgICBvcHRpb24uc2VsZWN0ZWQgPSBvcHRpb24udmFsdWUudG9Mb3dlckNhc2UoKSA9PT0gcmVhbFZhbHVlLnRvTG93ZXJDYXNlKClcbiAgICB9XG4gIH0pXG59XG5cbmNvbnN0IGNyZWF0ZVNlbGVjdCA9ICh0aXRsZTogc3RyaW5nLCBpZDogc3RyaW5nLCBibHVyYjogc3RyaW5nLCBzYW5kYm94OiBTYW5kYm94LCBvcHRpb246IGFueSkgPT4ge1xuICBjb25zdCBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKVxuICBjb25zdCB0ZXh0VG9EZXNjcmliZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpXG4gIHRleHRUb0Rlc2NyaWJlLnRleHRDb250ZW50ID0gdGl0bGUgKyBcIjpcIlxuICBsYWJlbC5hcHBlbmRDaGlsZCh0ZXh0VG9EZXNjcmliZSlcblxuICBjb25zdCBzZWxlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpXG4gIHNlbGVjdC5pZCA9IFwiY29tcGlsZXItc2VsZWN0LVwiICsgaWRcbiAgbGFiZWwuYXBwZW5kQ2hpbGQoc2VsZWN0KVxuXG4gIHNlbGVjdC5vbmNoYW5nZSA9ICgpID0+IHtcbiAgICBjb25zdCB2YWx1ZSA9IHNlbGVjdC52YWx1ZSAvLyB0aGUgaHVtYW4gc3RyaW5nXG4gICAgY29uc3QgY29tcGlsZXJJbmRleCA9IG9wdGlvblt2YWx1ZV1cbiAgICBzYW5kYm94LnVwZGF0ZUNvbXBpbGVyU2V0dGluZyhpZCwgY29tcGlsZXJJbmRleClcbiAgfVxuXG4gIE9iamVjdC5rZXlzKG9wdGlvbilcbiAgICAuZmlsdGVyKGtleSA9PiBpc05hTihOdW1iZXIoa2V5KSkpXG4gICAgLmZvckVhY2goa2V5ID0+IHtcbiAgICAgIC8vIGhpZGUgTGF0ZXN0XG4gICAgICBpZiAoa2V5ID09PSBcIkxhdGVzdFwiKSByZXR1cm5cblxuICAgICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKVxuICAgICAgb3B0aW9uLnZhbHVlID0ga2V5XG4gICAgICBvcHRpb24udGV4dCA9IGtleVxuXG4gICAgICBzZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uKVxuICAgIH0pXG5cbiAgY29uc3Qgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpXG4gIHNwYW4udGV4dENvbnRlbnQgPSBibHVyYlxuICBzcGFuLmNsYXNzTGlzdC5hZGQoXCJjb21waWxlci1mbGFnLWJsdXJiXCIpXG4gIGxhYmVsLmFwcGVuZENoaWxkKHNwYW4pXG5cbiAgcmV0dXJuIGxhYmVsXG59XG5cbmV4cG9ydCBjb25zdCBzZXR1cEpTT05Ub2dnbGVGb3JDb25maWcgPSAoc2FuZGJveDogU2FuZGJveCkgPT4ge31cbiJdfQ==